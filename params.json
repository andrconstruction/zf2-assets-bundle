{
  "name": "Assetsbundle",
  "tagline": " AssetsBundle is module for ZF2 allowing asset managment (bundling & caching)",
  "body": "AssetsBundle\r\n=======\r\n\r\n[![Build Status](https://travis-ci.org/neilime/zf2-assets-bundle.png?branch=master)](https://travis-ci.org/neilime/zf2-assets-bundle)\r\n[![Latest Stable Version](https://poser.pugx.org/neilime/zf2-assets-bundle/v/stable.png)](https://packagist.org/packages/neilime/zf2-assets-bundle)\r\n[![Total Downloads](https://poser.pugx.org/neilime/zf2-assets-bundle/downloads.png)](https://packagist.org/packages/neilime/zf2-assets-bundle)\r\n\r\nNOTE : If you want to contribute don't hesitate, I'll review any PR.\r\n\r\n<a href='https://pledgie.com/campaigns/26668'><img alt='Click here to lend your support to: ZF2 AssetsBundle and make a donation at pledgie.com !' src='https://pledgie.com/campaigns/26668.png?skin_name=chrome' border='0' ></a>\r\n\r\nIntroduction\r\n------------\r\n\r\nAssetsBundle is a module for ZF2 allowing asset management (bundling & caching) like Css, Js and Less, dependent on modules, controllers and actions .\r\nThis module manages the concept of the \"development/production\" environment.\r\n\r\nIn development :\r\n - Files are not bundled for easier debugging.\r\n - Less files are compiled when updated or if an \"@import\" inside is updated\r\n\r\nIn production :\r\n\r\n - All files are bundled and cached once only if needed.\r\n - Assets path are encrypted to mask file tree (with the exception of files in the \"assets\" directory)\r\n\r\nRequirements\r\n------------\r\n\r\n* [Zend Framework 2](https://github.com/zendframework/zf2) (latest master)\r\n* [lessphp](https://github.com/neilime/lessphp) (latest master).\r\n* [Minify](https://github.com/mrclay/minify) (latest master).\r\n\r\nInstallation\r\n------------\r\n\r\n### Main Setup\r\n\r\n#### By cloning project\r\n\r\n1. Install the [lessphp fork](https://github.com/Nodge/lessphp), [Minify](https://github.com/mrclay/minify) by cloning them into `./vendor/`.\r\n2. Clone this project into your `./vendor/` directory.\r\n\r\n#### With composer\r\n\r\n1. Add this project in your composer.json:\r\n\r\n    ```json\r\n    \"require\": {\r\n        \"neilime/zf2-assets-bundle\": \"dev-master\"\r\n    }\r\n    ```\r\n\r\n2. Now tell composer to download AssetsBundle by running the command:\r\n\r\n    ```bash\r\n    $ php composer.phar update\r\n    ```\r\n\r\n#### Post installation\r\n\r\n1. Enabling it in your `application.config.php`file.\r\n\r\n    ```php\r\n    <?php\r\n    return array(\r\n        'modules' => array(\r\n            // ...\r\n            'AssetsBundle',\r\n            // ...\r\n        ),\r\n        // ...\r\n    );\r\n    ```\r\nYou should note that as the ordering of modules matters, you should declare the 'AssetsBundle' module before your application modules to ensure the default settings don't take priority.\r\n\r\n2. Insert css & js files into your layout page\r\n\r\n    Into the `<head>` part :\r\n    ```php\r\n    echo $this->headScript();\r\n    ```\r\n\r\n\r\n    At the bottom of the `<body>` part :\r\n    ```php\r\n    echo $this->inlineScript();\r\n    ```\r\n\r\n# How to use _AssetsBundle_\r\n\r\n## Simple configuration example\r\n\r\nThis example shows how to convert [ZF2 Skeleton Application](https://github.com/zendframework/ZendSkeletonApplication) to manage assets via AssetsBundle.\r\n\r\n1. After installing skeleton application, install _AssetsBundle_ as explained above.\r\n\r\n2. Then just create cache directory into \"public/\".\r\n  ```bash\r\n  cd to/your/project/public/dir/\r\n  mkdir cache\r\n  ```\r\n3. Edit the application module configuration file `module/Application/config/module.config.php`, adding the configuration fragment below:\r\n\r\n\t```php\r\n\t<?php\r\n\treturn array(\r\n\t    //...\r\n\t    'assets_bundle' => array(\r\n\t    \t'assets' => array(\r\n    \t\t\t'css' => array('css'),\r\n    \t\t\t'js' => array(\r\n    \t\t\t\t'js/jquery.min.js',\r\n    \t\t\t\t'js/bootstrap.min.js'\r\n    \t\t\t),\r\n    \t\t\t'media' => array('img','fonts')\r\n\t    \t)\r\n\t    ),\r\n\t    //...\r\n\t);\r\n\t```\r\n4. Edit layout file `module/Application/view/layout/layout.phtml`, removing prepend function for assets:\r\n\t```php\r\n\t <?php\r\n\t//Remove these lines\r\n\r\n\t->prependStylesheet($this->basePath() . '/css/bootstrap-responsive.min.css')\r\n\t->prependStylesheet($this->basePath() . '/css/style.css')\r\n\t->prependStylesheet($this->basePath() . '/css/bootstrap.min.css')\r\n\r\n\t ->prependFile($this->basePath() . '/js/bootstrap.min.js')\r\n     ->prependFile($this->basePath() . '/js/jquery.min.js')\r\n     ```\r\n5. Save & Refresh.\r\n\r\n# Configuration\r\n\r\nThe default configuration is setup to run with \"Application ZF2 Skeleton\"\r\n\r\n### 1. _AssetsBundle_\r\n\r\n * boolean `production`: Define the application environment (development => false). Default `true`.\r\n * mixed `lastModifiedTime`: (optionnal) Allows you to define an arbitrary asset's last modified time in production.  Default `null` : last modified time is calculated for each asset.\r\n * string `basePath` : (optionnal) only needed if `cacheUrl` use `@zfBaseUrl`. If undefined, \\Zend\\Http\\PhpEnvironment\\Request::getBasePath() is used.\r\n * string `cachePath` : cache directory absolute path, you can use the `@zfRootPath` constant corresponding to current working directory. Default `@zfRootPath/public/cache`.\r\n * string `configCachePath` : configuration cache directory absolute path, you can use the `@zfRootPath` constant corresponding to current working directory. Default `@zfRootPath/data/cache`.\r\n * string `assetsPath` : (optionnal) assets directory absolute path, allows you to define relative path for assets config. You can use the constant `@zfRootPath` corresponding to current working directory. Default `@zfRootPath/public`.\r\n * string `cacheUrl` : cache directory base url, you can use the constant `@zfBaseUrl` corresponding to application base url . Default `@zfBaseUrl/assets/cache/`.\r\n * array `mediaExt` : Put here all medias extensions to be cached. Default `array('jpg','png','gif','cur','ttf','eot','svg','woff')`.\r\n * boolean `recursiveSearch`: If you define a folder as required asset, it will search for matching assets in that folder and its subfolders. Default `false`.\r\n\r\n### 2. Assets\r\n\r\nYou can define assets for modules / controllers / action\r\n\r\nExemple :\r\n\r\n ```php\r\n\t<?php\r\n\treturn array(\r\n            //...\r\n            'assets_bundle' => array(\r\n                //...\r\n    \t        'assets' => array(\r\n    \t\t\t//Common assets included in every pages\r\n    \t\t\t'css' => array(), //Define css files to include\r\n    \t\t\t'js' => array(), //Define js files to include\r\n    \t\t\t'less' => array(), //Define less files to include\r\n    \t\t\t'media' => array(), //Define images to manage\r\n\r\n    \t\t\t//Modules specific assets\r\n    \t\t\t'Test' =>  => array( // \"Test\" is the name of the module\r\n\r\n    \t\t\t\t'css' => array(),\r\n\t    \t\t\t'js' => array(),\r\n\t    \t\t\t'less' => array(),\r\n\t    \t\t\t'media' => array(),\r\n\r\n\t    \t\t\t//Controller specific assets\r\n\t    \t\t\t'Test\\Controller\\Name' => array(\r\n\t    \t\t\t\t'css' => array(),\r\n\t\t    \t\t\t'js' => array(),\r\n\t\t    \t\t\t'less' => array(),\r\n\t\t    \t\t\t'media' => array(),\r\n\r\n\t\t    \t\t\t//Action specific assets\r\n\t\t    \t\t\t'ActionName'=> array(\r\n\t\t    \t\t\t\t'css' => array(),\r\n\t\t\t    \t\t\t'js' => array(),\r\n\t\t\t    \t\t\t'less' => array(),\r\n\t\t\t    \t\t\t'media' => array()\r\n\t    \t\t\t\t),\r\n\t    \t\t\t\t//...\r\n\t    \t\t\t),\r\n\t    \t\t\t//...\r\n\t    \t\t),\r\n\t    \t\t//...\r\n    \t\t    )\r\n\t        ),\r\n\t        //...\r\n\t    ),\r\n\t    //...\r\n\t);\r\n```\r\n\r\n- For each asset, you can specify files or directories. All these elements are related to the asset path by default,\r\nbut you can specify an absolute path or use the constants \"@zfAssetsPath\" and \"@zfRootPath\".\r\nIf you specify a directory, all files matching the asset type (css, less, js, media) will be included.\r\n\r\n- You can use `.php` files as assets, there will be interpret.\r\n\r\n- You can use url for `js` and `css` assets :\r\n\r\n    ```php\r\n    <?php\r\n        return array(\r\n            //...\r\n            'assets_bundle' => array(\r\n                //...\r\n                'assets' => array(\r\n                    'js' => array('http://ajax.googleapis.com/ajax/libs/mootools/1.4.5/mootools.js'),\r\n                    //...\r\n                )\r\n                //...\r\n            )\r\n            //...\r\n        );\r\n    ```\r\n\r\n    This example includes `Mootools` from _Google Hosted Libraries_\r\n\r\n- You can define an inclusion order like this :\r\n\r\n    ```php\r\n    <?php\r\n        return array(\r\n            //...\r\n            'assets_bundle' => array(\r\n                //...\r\n                'assets' => array(\r\n                    'js' => array('js/firstFile.js','js'),\r\n                    //...\r\n                )\r\n            )\r\n            //...\r\n        );\r\n    ```\r\n\r\n    This example includes the file \"firstFile.js\" first, and all other javascript files in the folder \"js\"\r\n\r\n### 3. Custom Js\r\n\r\nThis function allows you to dynamically include javascript files. For exemple, files specific to user settings.\r\nIn this case, your controller that need these file have to extend `AssetsBundle\\Mvc\\Controller\\AbstractActionController`.\r\n\r\n__Attention !__ Jscustom process does not cache javascript, due to performance reasons\r\n\r\nThen create a jscustomAction function into your controller :\r\n\r\n```php\r\npublic function jscustomAction($sAction = null){\r\n\t//Check params, it's not mandatory\r\n\tif(empty($sAction)){\r\n\t\t$sAction = $this->params('js_action');\r\n\t\tif(empty($sAction))throw new \\InvalidArgumentException('Action param is empty');\r\n\t}\r\n\r\n\t$aJsFiles = array();\r\n\tswitch(strtolower($sAction)){\r\n\t\tcase 'myActionName':\r\n\t\t\t//Put here all js files needed for \"myActionName\" action\r\n\t\t\t$aJsFiles[] = 'js/test.js';\r\n\t\t\t$aJsFiles[] = 'js/test.php';\r\n\t\t\tbreak;\r\n\t}\r\n\treturn $aJsFiles;\r\n}\r\n```\r\n\r\nEdit layout file:\r\n\r\n```php\r\n//Into head\r\n\r\n//Production case\r\nif(!empty($this->jsCustomUrl))$this->plugin('InlineScript')->appendFile($this->jsCustomUrl.'?'.time()); //Set time() force browser not to cache file, it's not mandatory\r\n//Development case\r\nelseif(is_array($this->jsCustomFiles))foreach($this->jsCustomFiles as $sJsCustomFile){\r\n\t$this->plugin('InlineScript')->appendFile($sJsCustomFile);\r\n}\r\n```\r\n\r\n# Tools\r\n\r\n_AssetsBundle_ provides console tools.\r\n\r\n## Features\r\n\r\n    Rendering all assets\r\n    Empty cache directory\r\n\r\n## Usage\r\n\r\n### Rendering all assets\r\n\r\n    php public/index.php render\r\n\r\n### Empty cache directory\r\n\r\n    php public/index.php empty\r\n    \r\n# Faq\r\n\r\n## Filters\r\n\r\n### How to disable media optimization\r\n\r\nIn the assets_bundle configuration, you can disabled filters for image : \r\n```php\r\n 'filters' => array(\r\n        'png' => null,\r\n        'jpg' => null, 'jpeg' => null,\r\n        'gif' => null,\r\n    ),\r\n```\r\n### How to change Javascript compressor\r\n\r\nIn the assets_bundle configuration, you can define which js filter you want to use in configuration\r\n```php\r\n    'filters' => array(\r\n            \\AssetsBundle\\AssetFile\\AssetFile::ASSET_JS => 'JsMinAssetFileFilter',\r\n        ),\r\n    ),\r\n```\r\n\r\n## Common errors\r\n\r\n### \"/my/file/path.jpeg\" has not been cached as file\r\n\r\nEvery media that are called into you stylesheets must be cached, you should define them the assets_bundle configuration :\r\n```php\r\n    'assets' => array(           \r\n        'media' => array(\r\n            '/my/file/path.jpeg',\r\n        ),\r\n    ),\r\n```\r\n\r\n\r\n",
  "google": "UA-53063406-2",
  "note": "Don't delete this file! It's used internally to help with page regeneration."
}