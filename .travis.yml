language: php

php:
 - "5.3"
 - "5.4"
 - "5.5"
 - "5.6"

env:
  global:
    secure: MlHYK8Q/fLzsVBiYtzFk8yM1Nb1fr2zTPxpatNED5ZdlIjzUkoskmmDnHxCsNhmHuzwNuQWRymwkYK0B8H5MDilhfqNl95PYpuCXIiD471ZaszWILYrPLuSxk2mDbQ/2yRB+bsUL3Ibj50Xk9TGkrkMvEZw3btX0WmxsaMLFDyo=

before_install:
 - mkdir -p ~/.composer
 - cp .travis.composer.json ~/.composer/config.json
 - composer self-update
 - composer install --prefer-dist --dev

before_script:
 - mkdir -p build/logs
 - mkdir -p build/phpdoc

script:
 - cd tests
 - phpunit -d max_execution_time=0 --coverage-text --coverage-clover ../build/logs/clover.xml
 - cd ..

after_script:
 - php vendor/bin/coveralls --verbose --config
 - vendor/bin/phpdoc -d ./src/AssetsBundle -t ./build/phpdoc
 - bash ./build/publish_build.sh
